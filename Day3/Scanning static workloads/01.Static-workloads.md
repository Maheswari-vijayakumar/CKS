## 🛡️ Image Vulnerability Scanning

> **Important:** This scan must be performed **before** running your pod in the development not in the production environment.

### 🔍 Tools for Scanning

You can use the following tool for scanning container images:

#### 🛠️ Trivy

- Trivy acts like an antivirus tool for container images.
- It scans for known vulnerabilities in your image layers.
- **Note:** Install Trivy **only in the development cluster**. It should **not** be installed in the production cluster.


### Trivy installtion
```
sudo apt-get install wget apt-transport-https gnupg lsb-release
wget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | sudo apt-key add -
echo deb https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main | sudo tee -a /etc/apt/sources.list.d/trivy.list
sudo apt-get update
sudo apt-get install trivy
trivy --version
```

### Lets pull the nginx image and scan the image with trivy

```
docker pull nginx
docker images

# this will give you the vulnerabilities from your image, then search the details in `nvd` portal with faild item id like `CVE-2023-6879`
trivy image nginx:latest

```
=> copy the crtical code and check it in `nvd` `vulnerabilities` and get the advisory solutions for the remediation from this nvd portal

If you've confirmed it's not a risk(When it is officical image) to your app, create a .trivyignore file:
```
CVE-2023-45853
```

Then run Trivy:
```
trivy image --ignorefile .trivyignore your-image
```

# Report formats:

```
trivy image -f table your-image-name
trivy image --severity HIGH,CRITICAL your-image-name
trivy image -f json -o results.json your-image-name

```


