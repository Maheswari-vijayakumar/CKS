# Using Kubernetes Secrets for Database Credentials

### 1. Create a Secret

```bash
kubectl create secret generic sqlcreds \
  --from-literal=username=maho \
  --from-literal=password=sundaymonday
```

---

### 2. Create a Pod manifest

```bash
vim testapp.yaml
```

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: db-pod
spec:
  containers:
    - name: envars-test-container
      image: mysql:latest
      env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: sqlcreds
              key: password
```

---

### 3. Deploy & Verify

```bash
kubectl apply -f testapp.yaml
kubectl get pods -o wide
```

---

⚠️ **Note:**

* By default, Kubernetes stores Secrets **in plaintext (base64-encoded)** in `etcd`.
* To secure credentials:

  * Enable **encryption at rest** for Secrets in Kubernetes.
  * Restrict access using **RBAC**.
  * Consider using **external secret managers** (e.g., HashiCorp Vault, AWS Secrets Manager, GCP Secret Manager).

---

